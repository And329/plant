services:
  telegram_web_app:
    build:
      context: ..  # Build from parent directory to access backend code
      dockerfile: frontend-telegram/Dockerfile
    command: uvicorn main:app --host 0.0.0.0 --port 8200
    env_file:
      - .env
    ports:
      - "8200:8200"
    environment:
      - BACKEND_API_URL=${BACKEND_API_URL:-http://api:8000}
    volumes:
      # Mount backend code (temporary until refactored to use HTTP API)
      - ../backend/app:/app/app:ro
      - ../backend/data:/app/data
    networks:
      - plant_stack

# Note: This frontend still imports backend code directly
# See README.md for refactoring plan to make it truly standalone

networks:
  plant_stack:
    external: true
    name: ${PLANT_STACK_NETWORK:-plant_stack}
