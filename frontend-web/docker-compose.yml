services:
  web_ui:
    build:
      context: .
    command: uvicorn main:app --host 0.0.0.0 --port 8100
    env_file:
      - .env
    volumes:
      - ./app:/app/app
      - ./main.py:/app/main.py
    ports:
      - "8100:8100"
    environment:
      - BACKEND_API_URL=${BACKEND_API_URL:-http://api:8000}
      - SESSION_SECRET_KEY=${SESSION_SECRET_KEY:-dev-secret-change-in-production}
      - DEVICE_OFFLINE_SECONDS=${DEVICE_OFFLINE_SECONDS:-120}
      - ADMIN_EMAILS=${ADMIN_EMAILS:-}
    networks:
      - plant_stack

networks:
  plant_stack:
    external: true
    name: ${PLANT_STACK_NETWORK:-plant_stack}
